(this.webpackJsonpmesto_react=this.webpackJsonpmesto_react||[]).push([[0],{30:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(20),i=n.n(o),s=n(10),r=(n(30),n(24)),l=n(3),u=n(4),j=c.a.createContext(),d=n(2),m=n(25),b=n(0),p=function(e){var t=e.component,n=Object(m.a)(e,["component"]);return Object(b.jsx)(u.b,{children:function(){return n.loggedIn?Object(b.jsx)(t,Object(d.a)({},n)):Object(b.jsx)(u.a,{to:"./sign-in"})}})},_=n(22),h=n(23),f=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))},O=new(function(){function e(t){Object(_.a)(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers}return Object(h.a)(e,[{key:"getUserInfo",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{headers:Object(d.a)(Object(d.a)({},this.headers),{},{authorization:"Bearer ".concat(localStorage.getItem("jwt"))})}).then(f)}},{key:"getInitialCards",value:function(){return fetch("".concat(this.baseUrl,"/cards"),{headers:Object(d.a)(Object(d.a)({},this.headers),{},{authorization:"Bearer ".concat(localStorage.getItem("jwt"))})}).then(f)}},{key:"postCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:Object(d.a)(Object(d.a)({},this.headers),{},{authorization:"Bearer ".concat(localStorage.getItem("jwt"))}),body:JSON.stringify({name:e.name,link:e.link})}).then(f)}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:Object(d.a)(Object(d.a)({},this.headers),{},{authorization:"Bearer ".concat(localStorage.getItem("jwt"))}),body:JSON.stringify({name:t,about:n})}).then(f)}},{key:"deleteCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:Object(d.a)(Object(d.a)({},this.headers),{},{authorization:"Bearer ".concat(localStorage.getItem("jwt"))})}).then(f)}},{key:"addLike",value:function(e){return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:Object(d.a)(Object(d.a)({},this.headers),{},{authorization:"Bearer ".concat(localStorage.getItem("jwt"))})}).then(f)}},{key:"deleteLike",value:function(e){return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:Object(d.a)(Object(d.a)({},this.headers),{},{authorization:"Bearer ".concat(localStorage.getItem("jwt"))})}).then(f)}},{key:"setUserAvatar",value:function(e){return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:Object(d.a)(Object(d.a)({},this.headers),{},{authorization:"Bearer ".concat(localStorage.getItem("jwt"))}),body:JSON.stringify({avatar:e})}).then(f)}},{key:"changeLikeCardStatus",value:function(e,t){return fetch("".concat(this.baseUrl,"/cards/").concat(e,"/likes"),{method:t?"PUT":"DELETE",headers:Object(d.a)(Object(d.a)({},this.headers),{},{authorization:"Bearer ".concat(localStorage.getItem("jwt"))})}).then(f)}}]),e}())({baseUrl:"https://api.mesto.nomoredomains.rocks",headers:{"Content-Type":"application/json"}}),g="https://api.mesto.nomoredomains.rocks",x=function(e){return e.ok?e.json():Promise.reject(e)},v=n.p+"static/media/button.d5d6f8af.svg",k=function(e){var t=e.card,n=Object(a.useContext)(j),c=t.owner===n._id,o=t.likes.some((function(e){return e===n._id})),i="card__btn-remove ".concat(c?"card__btn-remove_active":""),s="card__like-button ".concat(o?"card__like-button_active":"");return Object(b.jsxs)("figure",{className:"card__item",children:[Object(b.jsx)("button",{className:i,type:"button",onClick:function(){e.onCardDelete(e.card)}}),Object(b.jsx)("img",{className:"card__photo",src:t.link,alt:t.name,onClick:function(){e.onCardClick(e.card)}}),Object(b.jsxs)("figcaption",{className:"card__caption",children:[Object(b.jsx)("h2",{className:"card__title",children:t.name}),Object(b.jsxs)("div",{className:"card__like",children:[Object(b.jsx)("button",{className:s,type:"button",onClick:function(){e.onCardLike(e.card)}}),Object(b.jsx)("h2",{className:"card__like-counter",children:t.likes.length})]})]})]})},N=n.p+"static/media/logo.6129e9de.svg";var C=function(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),c=n[0],o=n[1];return Object(b.jsxs)(b.Fragment,{children:[c&&Object(b.jsxs)("div",{className:"header__open-menu",children:[Object(b.jsx)("h2",{className:"header__user-email header__user-email_menu",children:e.userEmail}),Object(b.jsx)(s.b,{className:"header__link header__link_menu ",onClick:e.onLogOut,to:"/sign-in",children:e.linkTitle})]}),Object(b.jsxs)("header",{className:"header page__header",children:[Object(b.jsx)("div",{className:"header__container",children:Object(b.jsx)("img",{className:"logo",src:N,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u041c\u0435\u0441\u0442\u043e"})}),e.loggedIn?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{className:"header__nav-icon",onClick:function(){c?(o(!1),document.querySelector(".header__nav-icon-item").classList.toggle("header__nav-icon-item_open")):(o(!0),document.querySelector(".header__nav-icon-item").classList.toggle("header__nav-icon-item_open"))},children:Object(b.jsx)("span",{className:"header__nav-icon-item"})}),Object(b.jsxs)("div",{className:"header__navbar",children:[Object(b.jsx)("h2",{className:"header__user-email",children:e.userEmail}),Object(b.jsx)(s.b,{className:"header__link header__link_desktop",onClick:e.onLogOut,to:"/sign-in",children:e.linkTitle})]})]}):Object(b.jsx)(s.b,{className:"header__link",onClick:e.onLogOut,to:e.linkRoute,children:e.linkTitle})]})]})};var y=function(e){var t=Object(a.useContext)(j);return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(C,{loggedIn:e.loggedIn,userEmail:e.userEmail,linkTitle:"\u0412\u044b\u0439\u0442\u0438",linkRoute:"/sign-in",onLogOut:e.onLogOut}),Object(b.jsxs)("main",{className:"content",children:[Object(b.jsxs)("section",{className:"profile page__profile",children:[Object(b.jsxs)("div",{className:"profile__image",children:[Object(b.jsx)("img",{className:"profile__avatar",src:t.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440"}),Object(b.jsx)("button",{className:"profile__edit-avatar",type:"button",onClick:e.onEditAvatar})]}),Object(b.jsxs)("div",{className:"profile__info",children:[Object(b.jsx)("h1",{className:"profile__name",id:"name",children:t.name}),Object(b.jsx)("button",{className:"profile__edit-button",type:"button",onClick:e.onEditProfile}),Object(b.jsx)("p",{className:"profile__job",children:t.about})]}),Object(b.jsx)("button",{className:"profile__add-button",type:"button",onClick:e.onAddPlace,children:Object(b.jsx)("img",{className:"button button_add",src:v,alt:"\u041a\u043d\u043e\u043f\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})]}),Object(b.jsx)("section",{className:"cards page__cards",children:e.cards.map((function(t){return Object(b.jsx)(k,{onCardClick:e.onCardClick,card:t,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete},t._id)}))})]})]})};var S=function(){return Object(b.jsx)("footer",{className:"footer page__footer",children:Object(b.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",(new Date).getFullYear()," Mesto Russia"]})})};var w=function(e){var t=e.card;return Object(b.jsx)("div",{className:"popup popup_image ".concat(t?"popup_opened":""),onClick:e.onClose,children:Object(b.jsxs)("figure",{className:"popup__container popup__container_image",onClick:function(e){return e.stopPropagation()},children:[Object(b.jsx)("button",{className:"popup__button-close popup__button-close_image",type:"button",children:Object(b.jsx)("img",{className:"button button_close",src:v,alt:"\u041a\u043d\u043e\u043f\u043a\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u044c",onClick:e.onClose})}),Object(b.jsx)("img",{className:"popup__photo",src:t?"".concat(t.link):"#",alt:t?"".concat(t.name):""}),Object(b.jsx)("figcaption",{className:"popup__caption",children:t?"".concat(t.name):""})]})})},L=n(9);var E=function(e){return Object(b.jsx)("div",{className:"popup popup_".concat(e.name," ").concat(e.isOpen&&"popup_opened"),onClick:e.onClose,children:Object(b.jsxs)("div",{className:"popup__container popup__container_".concat(e.name),onClick:function(e){return e.stopPropagation()},children:[Object(b.jsx)("button",{className:"popup__button-close",type:"button",onClick:e.onClose,children:Object(b.jsx)("img",{className:"button button_close",src:v,alt:"\u041a\u043d\u043e\u043f\u043a\u0430 \u0437\u0430\u043a\u0440\u044b\u0442\u044c"})}),Object(b.jsx)("h2",{className:"popup__title popup__title_".concat(e.name),children:e.title}),Object(b.jsx)("form",{className:"form form_".concat(e.name),name:"form",noValidate:!0,onSubmit:e.onSubmit,children:e.children})]})})};var I=function(e){var t=Object(a.useState)({name:"",description:""}),n=Object(l.a)(t,2),c=n[0],o=n[1],i=Object(a.useContext)(j);function s(e){o(Object(d.a)(Object(d.a)({},c),{},Object(L.a)({},e.target.name,e.target.value)))}return Object(a.useEffect)((function(){o({name:i.name,description:i.about})}),[i]),Object(b.jsxs)(E,{name:"profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:c.name,about:c.description})},children:[Object(b.jsx)("label",{className:"form__field",children:Object(b.jsx)("input",{className:"form__input form__input_type_name",id:"name-input",type:"text",name:"name",required:!0,minLength:"2",maxLength:"40",value:c.name,onChange:s})}),Object(b.jsxs)("label",{className:"form__field",children:[Object(b.jsx)("input",{className:"form__input form__input_type_job",value:c.description,onChange:s,id:"job-input",type:"text",name:"description",required:!0,minLength:"2",maxLength:"200"}),Object(b.jsx)("span",{className:"popup__error",id:"job-input-error"})]}),Object(b.jsx)("button",{className:"form__button-submit",type:"submit",children:e.isLoading?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})};var U=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){e.isOpen&&(t.current.value="")}),[e.isOpen]),Object(b.jsxs)(E,{name:"avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(n){n.preventDefault(),e.onUpdateAvatar({avatar:t.current.value}),n.target.reset()},children:[Object(b.jsxs)("label",{className:"form__field",children:[Object(b.jsx)("input",{className:"form__input form__input_type_link",id:"link-photo-input",type:"url",name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0444\u043e\u0442\u043e",required:!0,ref:t}),Object(b.jsx)("span",{className:"popup__error",id:"link-photo-input-error"})]}),Object(b.jsx)("button",{className:"form__button-submit",type:"submit",children:e.isLoading?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})};var T=function(e){var t=Object(a.useState)({title:"",link:""}),n=Object(l.a)(t,2),c=n[0],o=n[1];function i(e){o(Object(d.a)(Object(d.a)({},c),{},Object(L.a)({},e.target.name,e.target.value)))}return Object(a.useEffect)((function(){e.isOpen&&o({title:"",link:""})}),[e.isOpen]),Object(b.jsxs)(E,{name:"cards",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onAddPlace({name:c.title,link:c.link})},children:[Object(b.jsxs)("label",{className:"form__field",children:[Object(b.jsx)("input",{className:"form__input form__input_cards form__input_type_title",id:"title-input",type:"text",name:"title",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:c.title,onChange:i,required:!0,minLength:"2",maxLength:"30"}),Object(b.jsx)("span",{className:"popup__error",id:"title-input-error"})]}),Object(b.jsxs)("label",{className:"form__field",children:[Object(b.jsx)("input",{className:"form__input form__input_cards form__input_type_link",id:"link-input",type:"url",name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",value:c.link,onChange:i,required:!0}),Object(b.jsx)("span",{className:"popup__error",id:"link-input-error"})]}),Object(b.jsx)("button",{className:"form__button-submit form__button-submit_cards",type:"submit",children:e.isLoading?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})};var P=function(e){return Object(b.jsx)(E,{name:"remove-card",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",isOpen:e.isOpen,onClose:e.onClose,children:Object(b.jsx)("button",{className:"popup__button-confirm",type:"button",onClick:function(t){t.preventDefault(),e.onClick(e.card)},children:e.isLoading?"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435":"\u0414\u0430"})})},D=n.p+"static/media/union.1b6082f8.svg",A=n.p+"static/media/img-fail.df8eddf6.svg";var B=function(e){return Object(b.jsx)(E,{name:"infotooltip",isOpen:e.isOpen,onClose:e.onClose,children:e.isSignUp?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("img",{className:"popup__img-info",src:D,alt:"succes-img"}),Object(b.jsx)("p",{className:"popup__caption popup__caption_infotooltip",children:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"})]}):e.isSignUp&&e.loggedIn?void 0:Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("img",{className:"popup__img-info",src:A,alt:"fail-img"}),Object(b.jsx)("p",{className:"popup__caption popup__caption_infotooltip",children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."})]})})};var F=function(e){var t=Object(a.useState)({password:"",email:""}),n=Object(l.a)(t,2),c=n[0],o=n[1];function i(e){var t=e.target,n=t.name,a=t.value;o(Object(d.a)(Object(d.a)({},c),{},Object(L.a)({},n,a)))}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(C,{linkTitle:"\u0412\u043e\u0439\u0442\u0438",linkRoute:"/sign-in"}),Object(b.jsx)("div",{className:"sign page__login",children:Object(b.jsxs)("div",{className:"sign__container",children:[Object(b.jsx)("h2",{className:"sign__title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(b.jsxs)("form",{className:"form form_sign",onSubmit:function(t){var n=c.password,a=c.email;t.preventDefault(),e.onRegister({password:n,email:a})},noValidate:!0,children:[Object(b.jsx)("label",{className:"form__field",children:Object(b.jsx)("input",{className:"form__input form__input_sign",id:"email",name:"email",type:"email",placeholder:"Email",value:c.email,onChange:i,autoComplete:"off"})}),Object(b.jsx)("label",{className:"form__field",children:Object(b.jsx)("input",{className:"form__input form__input_sign",id:"password",name:"password",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:c.password,onChange:i,autoComplete:"off"})}),Object(b.jsx)("button",{className:"form__button-submit form__button-submit_sign",type:"submit",onClick:e.onInfoTooltip,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(b.jsxs)("p",{className:"sign__signin-link",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?\xa0",Object(b.jsx)(s.b,{to:"/sign-in",className:"sign__signin-link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})]})};var z=function(e){var t=Object(a.useState)({password:"",email:""}),n=Object(l.a)(t,2),c=n[0],o=n[1];function i(e){var t=e.target,n=t.name,a=t.value;o(Object(d.a)(Object(d.a)({},c),{},Object(L.a)({},n,a)))}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(C,{linkTitle:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",linkRoute:"/sign-up"}),Object(b.jsx)("div",{className:"sign page__login",children:Object(b.jsxs)("div",{className:"sign__container",children:[Object(b.jsx)("h2",{className:"sign__title",children:"\u0412\u0445\u043e\u0434"}),Object(b.jsxs)("form",{className:"form form_sign",onSubmit:function(t){t.preventDefault(),e.onLogin(c)},noValidate:!0,children:[Object(b.jsx)("label",{className:"form__field",children:Object(b.jsx)("input",{id:"email",name:"email",type:"email",placeholder:"Email",autoComplete:"off",className:"form__input form__input_sign",value:c.email,onChange:i})}),Object(b.jsx)("label",{className:"form__field",children:Object(b.jsx)("input",{id:"password",name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",autoComplete:"off",className:"form__input form__input_sign",value:c.password,onChange:i})}),Object(b.jsx)("button",{className:"form__button-submit form__button-submit_sign",type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})]})};var R=Object(u.h)((function(){var e=Object(a.useState)({name:"",about:"",avatar:""}),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),i=Object(l.a)(o,2),s=i[0],d=i[1],m=Object(a.useState)(!1),_=Object(l.a)(m,2),h=_[0],f=_[1],v=Object(a.useState)(!1),k=Object(l.a)(v,2),N=k[0],C=k[1],L=Object(a.useState)(!1),E=Object(l.a)(L,2),D=E[0],A=E[1],R=Object(a.useState)(!1),q=Object(l.a)(R,2),J=q[0],V=q[1],H=Object(a.useState)(""),M=Object(l.a)(H,2),G=M[0],Y=M[1],K=Object(a.useState)(""),Q=Object(l.a)(K,2),W=Q[0],X=Q[1],Z=Object(a.useState)([]),$=Object(l.a)(Z,2),ee=$[0],te=$[1],ne=Object(a.useState)(!1),ae=Object(l.a)(ne,2),ce=ae[0],oe=ae[1],ie=Object(a.useState)(""),se=Object(l.a)(ie,2),re=se[0],le=se[1],ue=Object(a.useState)(!1),je=Object(l.a)(ue,2),de=je[0],me=je[1],be=Object(a.useState)(!1),pe=Object(l.a)(be,2),_e=pe[0],he=pe[1],fe=Object(u.g)();Object(a.useEffect)((function(){Oe(fe)}),[fe]);var Oe=function(e){if(localStorage.getItem("jwt")){var t=localStorage.getItem("jwt");(n=t,fetch("".concat(g,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}}).then(x)).then((function(t){t.email&&(he(!0),le(t.email),e.push("/"))})).catch((function(e){400===e.status&&console.log("\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435"),401===e.status&&console.log("\u041f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u043e\u043a\u0435\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0435\u043d")}))}var n};function ge(){d(!1),C(!1),f(!1),A(!1),V(!1),Y()}return Object(a.useEffect)((function(){_e&&Promise.all([O.getUserInfo(),O.getInitialCards()]).then((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];c(n),te(a)})).catch((function(e){return console.log(e)}))}),[_e]),Object(a.useEffect)((function(){function e(e){"Escape"===e.key&&ge()}return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[]),Object(b.jsxs)(j.Provider,{value:n,children:[Object(b.jsx)("div",{className:"page",children:Object(b.jsxs)("div",{className:"page__container",children:[Object(b.jsxs)(u.d,{children:[Object(b.jsx)(p,{exact:!0,path:"/",loggedIn:_e,component:y,userEmail:re,onEditProfile:function(){d(!0)},onAddPlace:function(){f(!0)},onEditAvatar:function(){C(!0)},onCardClick:function(e){Y(e)},cards:ee,onCardLike:function(e){var t=e.likes.some((function(e){return e===n._id}));O.changeLikeCardStatus(e._id,!t).then((function(t){te((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){return console.log(e)}))},onCardDelete:function(e){A(!0),X(e)},onLogOut:function(){he(!1),localStorage.removeItem("jwt"),fe.push("/sign-in"),le("")}}),Object(b.jsx)(u.b,{path:"/sign-in",children:Object(b.jsx)(z,{onLogin:function(e){var t=e.email,n=e.password;return function(e,t){return fetch("".concat(g,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(x)}(t,n).then((function(e){if(e.token)return he(!0),localStorage.setItem("jwt",e.token),le(t),void fe.push("/")})).catch((function(e){V(!0),400===e.status&&console.log("\u041d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"),401===e.status&&console.log("\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 email \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d")}))}})}),Object(b.jsx)(u.b,{path:"/sign-up",children:Object(b.jsx)(F,{onRegister:function(e){return function(e){var t=e.email,n=e.password;return fetch("".concat(g,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}).then(x)}({email:e.email,password:e.password}).then((function(e){return me(!0),fe.push("/sign-in"),e})).catch((function(e){me(!1),400===e.status&&console.log("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439")}))},onInfoTooltip:function(){V(!0)}})}),Object(b.jsx)(u.b,{children:_e?Object(b.jsx)(u.a,{to:"/"}):Object(b.jsx)(u.a,{to:"/sign-in"})})]}),_e&&Object(b.jsx)(S,{})]})}),Object(b.jsx)(w,{card:G,onClose:ge}),Object(b.jsx)(P,{isOpen:D,onClose:ge,onClick:function(){oe(!0),O.deleteCard(W._id).then((function(){te((function(e){return e.filter((function(e){return e!==W}))})),ge()})).catch((function(e){return console.log(e)})).finally((function(){return oe(!1)}))},isLoading:ce}),Object(b.jsx)(I,{isOpen:s,onClose:ge,onUpdateUser:function(e){oe(!0),O.setUserInfo(e).then((function(e){c(e),ge()})).catch((function(e){return console.log(e)})).finally((function(){return oe(!1)}))},isLoading:ce}),Object(b.jsx)(U,{isOpen:N,onClose:ge,onUpdateAvatar:function(e){oe(!0),O.setUserAvatar(e.avatar).then((function(e){c(e),ge()})).catch((function(e){return console.log(e)})).finally((function(){return oe(!1)}))},isLoading:ce}),Object(b.jsx)(T,{isOpen:h,onClose:ge,onAddPlace:function(e){oe(!0),O.postCard(e).then((function(e){te([e].concat(Object(r.a)(ee))),ge()})).catch((function(e){return console.log(e)})).finally((function(){return oe(!1)}))},isLoading:ce}),Object(b.jsx)(B,{isOpen:J,onClose:ge,isSignUp:de,loggedIn:_e})]})})),q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),o(e),i(e)}))};i.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(s.a,{children:Object(b.jsx)(R,{})})}),document.getElementById("root")),q()}},[[37,1,2]]]);
//# sourceMappingURL=main.46b45db1.chunk.js.map